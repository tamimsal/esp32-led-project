<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<title>ESP32 LED Control</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<style>
  body { font-family: Arial; text-align: center; margin-top: 50px; }
  button { padding: 15px 30px; font-size: 18px; margin: 10px; cursor: pointer; }
  .on { background-color: green; color: white; }
  .off { background-color: red; color: white; }
  #msg { margin-top: 20px; font-size: 16px; min-height: 1.2em; }
</style>
</head>
<body>
<h1>ESP32 LED Control</h1>
<p id="msg">Ready</p>
<button class="on" onclick="send('ON')">ON</button>
<button class="off" onclick="send('OFF')">OFF</button>

<script>
const SERVER_URL = 'https://YOUR-RENDER-URL'; // Replace with your Render backend URL
const DEVICE_ID = 'esp32-1';                   // Must match your ESP32 device ID
const KEY = 'supersecret';                     // Must match TOKEN in Render environment

async function send(cmd) {
  try {
    const res = await fetch(SERVER_URL + '/api/cmd', {
      method: 'POST',
      headers: { 'Content-Type': 'application/json' },
      body: JSON.stringify({ device: DEVICE_ID, command: cmd, key: KEY })
    });
    document.getElementById('msg').textContent = res.ok ? `Sent ${cmd} ✅` : `Error ${res.status} ❌`;
  } catch (e) {
    document.getElementById('msg').textContent = 'Network error ❌';
  }
}
</script>
</body>
</html>
